/*******************************************************************************
 *  Copyright (c) 2012 - 2016 Qualcomm Technologies International, Ltd.
 *  Part of CSR uEnergy SDK 2.6.1
 *  Application version 2.6.1.0
 *
 *  FILE
 *    hid_service_db.db
 *
 *  DESCRIPTION
 *    This file defines the HID Service in JSON format, which 
 *    is fairly human readable. This file is included in the main 
 *    application data base file which is used to produce ATT
 *    flat data base.
 *
 ******************************************************************************/
#ifndef __HID_SERVICE_DB__
#define __HID_SERVICE_DB__

#include "hid_uuids.h" 
#include "battery_uuids.h"
#include "user_config.h"

/* For service details, refer http://developer.bluetooth.org/gatt/services/
 * Pages/ServiceViewer.aspx?u=org.bluetooth.service.human_interface_device.xml
 */

/* Primary service declaration of HID service. */
primary_service {
    uuid : HID_SERVICE_UUID,
    name : "HID_SERVICE",

    /* Battery service as an included service. */
    include {
        ref : "BATTERY_SERVICE"
        },

    /* HID Information characteristic. */
    characteristic {
        uuid : HID_INFORMATION_UUID,
        name : "HID_INFORMATION",
        properties : read,
        flags : [FLAG_IRQ, FLAG_ENCR_R],
        value : [HID_FLAG_CLASS_SPEC_RELEASE, HID_FLAG_COUNTRY_CODE,
        HID_INFO_FLAGS]
    },

    /* Report map(report descriptor) characteristic. */
    characteristic {
    uuid : HID_REPORT_MAP_UUID,
    name : "HID_REPORT_MAP",
    properties : read,
    flags : [FLAG_IRQ, FLAG_ENCR_R],
    value : [0x05, 0x01,        /*   USAGE_PAGE (Generic Desktop) */
             0x09, 0x06,        /*   USAGE (Keyboard) */
             0xa1, 0x01,        /*   COLLECTION (Application) */
             0x85, 0x01,        /*   REPORT ID(1) Keyboard */
             0x05, 0x07,        /*   USAGE_PAGE (Keyboard) */
             0x19, 0xe0,        /*   USAGE_MINIMUM (Keyboard LeftControl) */
             0x29, 0xe7,        /*   USAGE_MAXIMUM (Keyboard Right GUI) */
             0x15, 0x00,        /*   LOGICAL_MINIMUM (0) */
             0x25, 0x01,        /*   LOGICAL_MAXIMUM (1) */
             0x75, 0x01,        /*   REPORT_SIZE (1) */
             0x95, 0x08,        /*   REPORT_COUNT (8) */
             0x81, 0x02,        /*   INPUT (Data,Var,Abs) - Modifier Byte (I)*/
             0x95, 0x01,        /*   REPORT_COUNT (1) */
             0x75, 0x08,        /*   REPORT_SIZE (8) */
             0x81, 0x03,        /*   INPUT (Cnst,Var,Abs) - Reserved Byte (I)*/
             0x95, 0x05,        /*   REPORT_COUNT (5) */
             0x75, 0x01,        /*   REPORT_SIZE (1) */
             0x05, 0x08,        /*   USAGE_PAGE (LEDs) */
             0x19, 0x01,        /*   USAGE_MINIMUM (Num Lock) */
             0x29, 0x05,        /*   USAGE_MAXIMUM (Kana) */
             0x91, 0x02,        /*   OUTPUT (Data,Var,Abs) - LED Report (O)*/
             0x95, 0x01,        /*   REPORT_COUNT (1) */
             0x75, 0x03,        /*   REPORT_SIZE (3) */
             0x91, 0x03,        /*   OUTPUT (Cnst,Var,Abs) - LED Padding (O)*/
             0x95, 0x06,        /*   REPORT_COUNT (6) */
             0x75, 0x08,        /*   REPORT_SIZE (8) */
             0x15, 0x00,        /*   LOGICAL_MINIMUM (0) */
             0x25, 0x65,        /*   LOGICAL_MAXIMUM (101) */
             0x05, 0x07,        /*   USAGE_PAGE (Keyboard) */
             0x19, 0x00,        /*   USAGE_MINIMUM (Reserved (no event indicated)) */
             0x29, 0x65,        /*   USAGE_MAXIMUM (Keyboard Application) */
             0x81, 0x00,        /*   INPUT (Data,Ary,Abs) - Keycode Array (I)*/
             0xc0, 0x06,        /*   END_COLLECTION */
             0x00, 0xff,        /*   USAGE_PAGE (Vendor Defined Page 1)*/
             0x09, 0x02,        /*   USAGE (Vendor Usage 1) */
             0xa1, 0x01,        /*   COLLECTION (Application) */
             0x85, 0x02,        /*   REPORT_ID (2) */
             0x75, 0x08,        /*   REPORT_SIZE (8) */
             0x95, 0x01,        /*   REPORT_COUNT (1) */
             0x15, 0x01,        /*   LOGICAL_MINIMUM (1) */
             0x25, 0x64,        /*   LOGICAL_MAXIMUM (100) */
             0x09, 0x20,        /*   USAGE (Battery Strength) */
             0x81, 0x00,        /*   INPUT (Data,Ary,Abs) */
             0xc0,              /*   END_COLLECTION */
             0x05, 0x0C,        /*   USAGE_PAGE (Consumer Devices) */
             0x09, 0x01,        /*   USAGE (Consumer Control) */   
             0xa1, 0x01,        /*   COLLECTION (Application) */
             0x85, 0x03,        /*   REPORT_ID (3) */
             0x75, 0x10,        /*   REPORT_SIZE (16) */
             0x95, 0x01,        /*   REPORT_COUNT (1) */
             0x15, 0x01,        /*   LOGICAL_MINIMUM */
             0x26, 0xff, 0x02,  /*   LOGICAL_MAXIMUM */
             0x19, 0x01,        /*   USAGE MINIMUM (Consumer control) */
             0x2a, 0xff, 0x02,  /*   USAGE MAXIMUM (Reserved) */      
             0x81, 0x60,        /*   INPUT (No preferred state, null state) */
             0xC0               /*   END_COLLECTION */],
      
             raw {
                value: [0xe002, HID_EXT_REPORT_REFERENCE_UUID, 0x0002, 
                BATTERY_LEVEL_UUID]
             }
    },

    /* Boot keyboard input report characteristic. */
    characteristic {
        uuid : HID_BOOT_KEYBOARD_INPUT_REPORT_UUID,
        name : "HID_BOOT_INPUT_REPORT",
        flags : [FLAG_IRQ, FLAG_ENCR_R],
        properties : [read, notify],
        /* Boot mode keyboard input report size is fixed to be 8 bytes by
         * HID USB standards.
         */
        size_value : 8,
        
        client_config {
            flags : [FLAG_IRQ, FLAG_ENCR_W],
            name : "HID_BOOT_INPUT_RPT_CLIENT_CONFIG"
            }
    },

    /* Boot keyboard output report characteristic. */
    characteristic {
        uuid : HID_BOOT_KEYBOARD_OUTPUT_REPORT_UUID,
        name : "HID_BOOT_OUTPUT_REPORT",
        flags : [FLAG_IRQ, FLAG_ENCR_R, FLAG_ENCR_W],
        properties : [read, write, write_cmd],
        /* Boot mode keyboard output report size is fixed to be 8 bytes by
         * HID USB standards.
         */
        size_value : 1
    },

    /* Input report characteristic. */
    characteristic {
        uuid : HID_REPORT_UUID,
        name : "HID_INPUT_REPORT",
        flags : [FLAG_IRQ, FLAG_ENCR_R],
        properties : [read, notify],
        /* Size of input report in report mode. The size depends upon the report
         * descriptor being used by the keyboard.
         *
         * Present structure of Keyboard Input Report(Report ID 1) 
         * Byte 0 - Modifier Keys (i.e. ctrl, alt, shift)
         * Byte 1 - Reserved
         * Byte 2 to 7   - Key presses
         */                  
        size_value : 8,
        
        client_config {
            flags : [FLAG_IRQ, FLAG_ENCR_W],
            name : "HID_INPUT_RPT_CLIENT_CONFIG"
            },
            
        raw {
        value: [0xe002, HID_REPORT_REFERENCE_UUID, 0x0002, 0x0101] /* Report ID - 1,
                                                                    * Report Type - 1 (Input)
                                                                    */
        }
    },

    /* Consumer report characteristic with Report ID 3. */
    characteristic {
        uuid : HID_REPORT_UUID,
        name : "HID_CONSUMER_REPORT",
        flags : [FLAG_IRQ, FLAG_ENCR_R],
        properties : [read, notify],
        /* This size is also derived from the report descriptor.
         * Present structure of consumer report.
         * 2 bytes of one consumer key report.
         */                  
        size_value : CONSUMER_REPORT_SIZE,
                
        client_config {
            flags : [FLAG_IRQ, FLAG_ENCR_W],
            name : "HID_CONSUMER_RPT_CLIENT_CONFIG"
            },
            
        raw {
        value: [0xe002, HID_REPORT_REFERENCE_UUID, 0x0002, 0x0301] /* Report ID - 3,
                                                                    * Report Type - 1 (Input)
                                                                    */
        }
    },

    /* Output report characteristic. */
    characteristic {
        uuid : HID_REPORT_UUID,
        name : "HID_OUTPUT_REPORT",
        flags : [FLAG_IRQ, FLAG_ENCR_R, FLAG_ENCR_W],
        properties : [read, write, write_cmd],
        /* Size of the output report as described in the report descriptor. */ 
        size_value : 1,
            
        raw {
        value: [0xe002, HID_REPORT_REFERENCE_UUID, 0x0002, 0x0102] /* Report ID - 1,
                                                                    * Report Type - 2 (Output)
                                                                    */
        }
    },

    /* HID control point characteristic. */
    characteristic {
        uuid : HID_CONTROL_POINT_UUID,
        name : "HID_CONTROL_POINT",
        flags : [FLAG_IRQ, FLAG_ENCR_W],
        properties : write_cmd,
        value : 0x00
    },

    /* Protocol mode characteristic. */
    characteristic {
        uuid : HID_PROTOCOL_MODE_UUID,
        name : "HID_PROTOCOL_MODE",
        flags : [FLAG_IRQ, FLAG_ENCR_R, FLAG_ENCR_W],
        properties : [read, write_cmd],
        value : 0x00
    }   
},
#endif /* __HID_SERVICE_DB__ */